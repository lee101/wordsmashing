{% import "gameon/templates/templates.jinja2" as gameon %}
{% import "templates/macros.jinja2" as macros with context %}
<!doctype html>
<html>
<head>
    <meta charset="utf-8">

    {% block headers %}

    {% endblock %}

    {{ macros.headers() }}

    {{ gameon.cssheaders() }}
    {{ macros.cssheaders() }}

    {% block css %}

    {% endblock %}
    {{ gameon.jsheaders() }}

    {{ macros.jsheaders() }}
    <script>
        //fixtures
        var achievements = {};
        {% for achievement in achievements %}
            {% if achievement.type == UNLOCKED_MEDIUM %}
                achievements.medium = true;
            {% endif %}
            {% if achievement.type == UNLOCKED_HARD %}
                achievements.hard = true;
            {% endif %}
        {% endfor %}

        var highscores = {};
        {% for score in highscores %}
            {% if score.difficulty == MEDIUM %}
                highscores.medium = {{ score.score }};
            {% endif %}
            {% if score.difficulty == EASY %}
                highscores.easy = {{ score.score }};
            {% endif %}
            {% if score.difficulty == HARD %}
                highscores.hard = {{ score.score }};
            {% endif %}
        {% endfor %}

        {% if level %}
            num_blocked = {{ level.blocked_spaces|length }} + {{ level.locked_spaces|length }};
            {% if level.blocked_spaces %}
                blocked_spaces = {};
                {% for pair in level.blocked_spaces %}
                    {% set bx = pair[0] %}
                    {% set by = pair[1] %}
                    blocked_spaces['{{ bx }}-{{ by }}'] = true;
                {% endfor %}
            {% endif %}

            {% if level.locked_spaces %}
                num_locked = {{ level.locked_spaces|length }};
                locked_spaces = {};
                {% for pair in level.locked_spaces %}
                    {% set bx = pair[0] %}
                    {% set by = pair[1] %}
                    locked_spaces['{{ bx }}-{{ by }}'] = true;
                {% endfor %}
            {% endif %}
        {% endif %}

       </script>
    {% block js %}

    {% endblock %}
</head>
<body>
<div id="modal" class="modal fade" tabindex="-1" role="dialog"
     aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    <i class="fa fa-times close-modal"></i>
                </button>
            </div>
            <div class="modal-body">

            </div>

        </div>
    </div>
</div>
<div class="mm-background">
    <div id="headerbody">
        {% include "/templates/shared/header.jinja2" %}
    </div>

    <div id="mainbody">
        {% block mainbody %}

        {% endblock %}
    </div>

    <div id="footerbody">
        {% include "/templates/shared/footer.jinja2" with context %}
    </div>

</div>

</body>
</html>
